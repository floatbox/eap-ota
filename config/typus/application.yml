# Typus Models Configuration File
#
# Use the README file as a reference to customize settings.


AirlineAlliance:
  fields:
    default: name, bonus_program_name
    list: name, bonus_program_name
    form: name, bonus_program_name
  relationships: carriers
  application: Base

GlobalDistributionSystem:
  fields:
    default: name
    list: name
    form: name
  relationships: carriers
  application: Base

Consolidator:
  fields:
    default: name, booking_office, ticketing_office
    list: name, booking_office, ticketing_office
    form: name, booking_office, ticketing_office
  relationships: carriers
  application: Base

Carrier:
  fields:
    default: iata, ru_shortname, ru_longname, en_shortname, en_longname, country
    list: iata, ru_shortname, ru_longname, en_shortname, en_longname, country
    form: ru_shortname, ru_longname, en_shortname, en_longname, iata, iata_ru, country, bonus_program_name, alliance, gds, interlines, consolidator, color, font_color, comment
    options:
      read_only: interlines, payments
  order_by: en_shortname, ru_shortname
  relationships: country, alliance, gds, consolidator
  filters: country, gds, consolidator
  search: ru_shortname, ru_longname, en_shortname, en_longname, ^iata
  application: Base

Airplane:
  fields:
    default: iata, name_ru, name_en, engine_type
    list: iata, name_ru, name_en, engine_type
    form: iata, iata_ru, icao, name_ru, name_en, engine_type
    options:
      selectors: engine_type

  order_by: name_ru
  relationships:
  filters: engine_type
  search: ^iata, name_ru, name_en
  application: Base

Airport:
  fields:
    default: iata, name_ru, name_en, importance, city
    list: iata, name_ru, name_en, importance, city
    form: iata, iata_ru, name_en, name_ru, synonym_list, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, domestic, icao, federal, international, runway_length, lat, lng, importance, city, disabled
    csv: iata, name_ru, city
    options:
      read_only: morpher_to, morpher_from, morpher_in
  order_by: name_ru
  relationships: city, country, geo_tags
  filters:
  search: name_ru, name_en, ^iata, synonym_list
  actions:
    index: update_completer
  application: Geo
  export: csv

City:
  fields:
    default: iata, name_ru, name_en, synonym_list, importance, country, region
    list: iata, name_ru, name_en, synonym_list, importance, country, region
    form: iata, iata_ru, name_ru, name_en, synonym_list, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, lat, lng, importance, country, region, timezone, disabled, search_around
    csv: iata, name_ru
    options:
      selectors: timezone
      read_only: morpher_to, morpher_from, morpher_in
  order_by: name_ru
  relationships: airports, country, geo_tags, region
  filters: country
  search: name_ru, name_en, ^iata, synonym_list
  actions:
    index: update_completer
  application: Geo
  export: csv

Order:
  fields:
    default: order_id, pnr_number, email, phone, updated_at
    list: source, pnr_number, email, phone, created_at,  price_with_payment_commission, payment_status, ticket_status, last_tkt_date, payment_type
    show: order_id, source, pnr_number, description, route, payment_status, ticket_status, email, phone, name_in_card, last_digits_in_card, full_info, price_total, price_tax, price_fare, price_share, price_our_markup, price_consolidator_markup, price_with_payment_commission, commission_carrier, commission_agent_comments, commission_subagent_comments, created_at, updated_at, last_tkt_date, payment_type, delivery, last_pay_time
    form: description, email, source, pnr_number, sirena_lead_pass, route, payment_type, price_tax, price_fare, price_consolidator_markup, price_our_markup, commission_subagent, ticket_status
    csv: pnr_number, charge_date, created_date, tickets_count, route, commission_carrier, price_tax, price_fare, price_consolidator_markup, commission_subagent, price_share, price_with_payment_commission, need_attention
    options:
      read_only: commission_carrier, commission_agent_comments, commission_subagent_comments
      selectors: payment_type, source, ticket_status
      date_formats:
        created_at: long
        updated_at: long
        last_pay_time: long
  order_by: -created_at
  search: ^pnr_number, email, phone
  options:
    default_action_on_item: show
    action_after_save: show
  actions:
    show: edit
  # тут не ввернешь конфирмации. временно убрал
  # actions:
  #   show: cancel, ticket, charge, unblock, show_pnr
  filters: source, payment_status, ticket_status, ticketed_date
  relationships: payments, tickets, order_comments
  application: Orders
  export: csv
  
OrderComment:
  fields:
    default: typus_user, text, created_at 
    list: order, text, typus_user
    form: order, text
    show: order, text, typus_user
    options:
      read_only: order
      date_formats:
        created_at: long
        updated_at: long
  options:
    default_action_on_item: show
    action_after_save: show
  relationships: order, typus_user
  order_by: created_at
  application: Orders

Ticket:
  fields:
    default: source, created_at, number, commission_carrier, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share
    list: source, created_at, number, commission_carrier, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share
    show: source, created_at, number, commission_carrier, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share, order
    csv: number, ticket_date, commission_carrier, route, cabins, price_fare, price_tax, price_total,  price_consolidator_markup, commission_subagent, price_share, price_transfer, pnr_number, need_attention
    options:
      date_formats:
        created_at: long
  options:
    default_action_on_item: show
  order_by: -created_at
  filters: created_at
  relationships: order
  application: Orders
  export: csv
  search: ^number


Payment:
  fields:
    default: ref, price, created_at, name_in_card, last_digits_in_card, reject_reason
    list: ref, price, created_at, name_in_card, last_digits_in_card, payment_status, reject_reason
    show: ref ,price, created_at, payture_state, last_digits_in_card, name_in_card, reject_reason, order
    options:
      date_formats:
        created_at: long
  options:
    default_action_on_item: show
  search: =id_override, =id, name_in_card
  relationships: order
  order_by: -created_at
  application: Orders


Destination:
  fields:
    default: from, to, rt
    list: from, rt, to, average_price, average_time_delta, hot_offers_counter
    show: from, rt, to
    options:
      selectors: rt
      booleans:
        # attribute: true, false
        rt: ["⇄", "→"]
  options:
    default_action_on_item: show
  order_by: -created_at
  relationships: hot_offers, from, to
  #filters: from, to, rt
  application: Hot Offers

HotOffer:
  fields:
    default: clickable_url, description, price, created_at
    list: clickable_url, description, price, created_at, price_variation, price_variation_percent
    show:  url, description, price, created_at, destination
    options:
      date_formats:
        created_at: long
        updated_at: long
  options:
    default_action_on_item: show
  order_by: price_variation
  relationships: destination
  search: description, ^url
  filters: created_at
  application: Hot Offers

Region:
  fields:
    default: name_ru, name_en, country
    list: name_ru, name_en, country, synonym_list
    form: name_ru, name_en, country, lat, lng, synonym_list, region_type, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in
    options:
      read_only: morpher_to, morpher_from, morpher_in
      selectors: region_type
  order_by: name_ru
  relationships: cities, country
  filters: country
  search: name_ru, name_en, synonym_list
  application: Geo

Country:
  fields:
    default: alpha2, name_ru, name_en, full_name_ru, continent, importance, synonym_list
    list: alpha2, name_ru, name_en, full_name_ru, continent, importance, synonym_list
    form: name_ru, name_en, full_name_ru, alpha2, alpha3, iso, continent, continent_part_ru, importance, synonym_list, lat, lng, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, main_city_iatas_as_text
    options:
      read_only: morpher_to, morpher_from, morpher_in, main_city_iatas_as_text
      selectors: continent
  order_by: name_ru
  relationships: carriers, airports, cities, geo_tags, regions
  filters:
  search:  name_en, name_ru, full_name_ru, synonym_list
  application: Geo

GeoTag:
  fields:
    default: name, desc, importance, synonym_list, proper_to, proper_from, proper_in
    list: name, desc, importance, synonym_list, proper_to, proper_from, proper_in
    form: name, desc, importance, synonym_list, proper_to, proper_from, proper_in, lat, lng
  order_by:
  # relationships: geo_taggings
  filters:
  search: name, synonym_list
  application: Geo

