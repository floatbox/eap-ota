# Typus Models Configuration File
#
# Use the README file as a reference to customize settings.


AirlineAlliance:
  fields:
    default: name, bonus_program_name
    list: name, bonus_program_name
    form: name, bonus_program_name
  relationships: carriers
  application: Base, 5

GlobalDistributionSystem:
  fields:
    default: name
    list: name
    form: name
  relationships: carriers
  application: Base, 5

Consolidator:
  fields:
    default: name, booking_office, ticketing_office
    list: name, booking_office, ticketing_office
    form: name, booking_office, ticketing_office
  relationships: carriers
  application: Base, 5

Carrier:
  fields:
    default: iata, ru_shortname, ru_longname, en_shortname, en_longname, country
    list: iata, ru_shortname, ru_longname, en_shortname, en_longname, country
    form: ru_shortname, ru_longname, en_shortname, en_longname, iata, iata_ru, country, bonus_program_name, alliance, gds, interlines, consolidator, color, font_color, comment
  order_by: en_shortname, ru_shortname
  relationships: country, alliance, gds, consolidator
  filters: country, gds, consolidator
  search: ru_shortname, ru_longname, en_shortname, en_longname, ^iata
  application: Base, 5

Airplane:
  fields:
    default: iata, name_ru, name_en, engine_type
    list: iata, name_ru, name_en, engine_type
    form: iata, iata_ru, icao, name_ru, name_en, engine_type
    options:
      selectors: engine_type

  order_by: name_ru
  relationships:
  filters: engine_type
  search: ^iata, name_ru, name_en
  application: Base, 5

Airport:
  fields:
    default: iata, name_ru, name_en, importance, city
    list: iata, name_ru, name_en, importance, city
    form: iata, iata_ru, name_en, name_ru, synonym_list, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, domestic, icao, federal, international, runway_length, lat, lng, importance, city, disabled
    csv: iata, name_ru, city
  order_by: name_ru
  relationships: city, country, geo_tags
  filters:
  search: name_ru, name_en, ^iata, synonym_list
  actions:
    index: update_completer
  application: Geo, 4
  export: csv

City:
  fields:
    default: iata, name_ru, name_en, synonym_list, importance, country, region
    list: iata, name_ru, name_en, synonym_list, importance, country, region
    form: iata, iata_ru, name_ru, name_en, synonym_list, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, lat, lng, importance, country, region, timezone, disabled, search_around
    csv: iata, name_ru
    options:
      selectors: timezone
  order_by: name_ru
  relationships: airports, country, geo_tags, region
  filters: country
  search: name_ru, name_en, ^iata, synonym_list
  actions:
    index: update_completer
  application: Geo, 4
  export: csv

Order:
  fields:
    default: order_id, pnr_number, email, phone, updated_at
    list: source, pnr_number, blank_count, contact, created_at,  price_with_payment_commission, payment_status, ticket_status, last_tkt_date, payment_type, has_refunds, partner, urgent, email_status
    show: order_id, has_refunds, source, pnr_number, blank_count, description, route, payment_status, ticket_status, contact, name_in_card, last_digits_in_card, full_info, price_fare, price_tax, price_consolidator_markup, price_our_markup, price_total, price_with_payment_commission, price_share, commission_carrier, commission_agent_comments, commission_subagent_comments, created_at, updated_at, last_tkt_date, payment_type, delivery, last_pay_time, partner
    form: description, has_refunds, email, source, pnr_number, sirena_lead_pass, blank_count, route, payment_type, price_fare, price_tax, price_consolidator_markup, price_our_markup, commission_subagent, ticket_status, last_pay_time, needs_update_from_gds
    csv: pnr_number, charge_date, created_date, tickets_count, route, commission_carrier, price_tax, price_fare, price_consolidator_markup, commission_subagent, price_share, price_with_payment_commission, need_attention, partner
    options:
      read_only: commission_carrier, commission_agent_comments, commission_subagent_comments
      selectors: payment_type, source, ticket_status
      booleans:
        has_refunds: ['yes', 'no']
      templates:
        needs_update_from_gds: boolean
      date_formats:
        created_at: long
        updated_at: long
        last_pay_time: long

  order_by: -created_at
  search: ^pnr_number, email, phone, =order_id
  options:
    default_action_on_item: show
    #action_after_save: show
  actions:
    show: edit
  # тут не ввернешь конфирмации. временно убрал
  # actions:
  #   show: cancel, ticket, charge, unblock, show_pnr
  filters:  created_at, source, payment_status, ticket_status, payment_type, has_refunds
  relationships: payments, tickets, order_comments, notifications
  application: Orders, 1
  export: csv

OrderComment:
  fields:
    default: text, created_at, typus_user, assigned_to, status, priority
    list: order, text, created_at, typus_user, assigned_to, status, priority
    form: order, text, assigned_to, status, priority
    show: order, text, created_at, typus_user, assigned_to, status, priority
    options:
      selectors: status, priority
      date_formats:
        created_at: long
        updated_at: long
  options:
    #action_after_save: show
  actions:
    show: edit
  search: ^order_id, text
  filters: created_at, typus_user, assigned_to, status, priority
  relationships: order, typus_user
  order_by: -created_at
  application: Misc, 2

Ticket:
  fields:
    default: number_with_code, order, carrier, name, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share, office_id, validator, status, ticketed_date, itinerary_receipt
    show: order, carrier, number_with_code, last_name, first_name, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share, office_id, validator, status, ticketed_date, itinerary_receipt
    edit: code, number, status, ticketed_date, carrier, last_name, first_name, route, price_fare, price_tax, price_consolidator_markup, commission_subagent, price_share, office_id, validator
    csv: source, number_with_code, ticket_date, commission_carrier, route, cabins, price_fare, price_tax, price_total,  price_consolidator_markup, commission_subagent, price_share, price_transfer, pnr_number, need_attention, validating_carrier, office_id, validator, status, ticketed_date
    options:
      selectors: status, source, office_id, validator
      date_formats:
        created_at: long
  options:
    default_action_on_item: edit
  order_by: -created_at
  filters: ticketed_date, source, validator, office_id
  relationships: order
  application: Orders, 1
  export: csv
  scopes: uncomplete
  search: ^number, last_name, first_name, ^pnr_number


Payment:
  fields:
    default: ref, price, created_at, name_in_card, last_digits_in_card, reject_reason
    list: ref, price, created_at, name_in_card, last_digits_in_card, payment_status, reject_reason
    show: ref ,price, created_at, payture_state, last_digits_in_card, name_in_card, reject_reason, order
    options:
      date_formats:
        created_at: long
  options:
    default_action_on_item: show
  search: =ref, name_in_card
  relationships: order
  order_by: -created_at
  filters: created_at
  application: Misc, 2


Destination:
  fields:
    default: from, to, rt
    list: from, rt, to, average_price, average_time_delta, hot_offers_counter
    show: from, rt, to
    options:
      selectors: rt
      booleans:
        # attribute: true, false
        rt: ["⇄", "→"]
  options:
    default_action_on_item: show
  order_by: -created_at
  relationships: hot_offers, from, to
  #filters: from, to, rt
  application: Hot Offers, 3

HotOffer:
  fields:
    default: clickable_url, description, price, created_at
    list: clickable_url, description, price, created_at, price_variation, price_variation_percent
    show:  url, description, price, created_at, destination
    options:
      date_formats:
        created_at: long
        updated_at: long
  options:
    default_action_on_item: show
  order_by: price_variation
  relationships: destination
  search: description, ^url
  filters: created_at
  application: Hot Offers, 3

Region:
  fields:
    default: name_ru, name_en, country
    list: name_ru, name_en, country, synonym_list
    form: name_ru, name_en, country, lat, lng, synonym_list, region_type, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in
    options:
      selectors: region_type
  order_by: name_ru
  relationships: cities, country
  filters: country
  search: name_ru, name_en, synonym_list
  application: Geo, 4

Country:
  fields:
    default: alpha2, name_ru, name_en, full_name_ru, continent, importance, synonym_list
    list: alpha2, name_ru, name_en, full_name_ru, continent, importance, synonym_list
    form: name_ru, name_en, full_name_ru, alpha2, alpha3, iso, continent, continent_part_ru, importance, synonym_list, lat, lng, morpher_to, morpher_from, morpher_in, proper_to, proper_from, proper_in, main_city_iatas_as_text
    options:
      selectors: continent
  order_by: name_ru
  relationships: carriers, airports, cities, geo_tags, regions
  filters:
  search:  name_en, name_ru, full_name_ru, synonym_list
  application: Geo, 4

GeoTag:
  fields:
    default: name, desc, importance, synonym_list, proper_to, proper_from, proper_in
    list: name, desc, importance, synonym_list, proper_to, proper_from, proper_in
    form: name, desc, importance, synonym_list, proper_to, proper_from, proper_in, lat, lng
  order_by:
  # relationships: geo_taggings
  filters:
  search: name, synonym_list
  application: Geo, 4

FlightGroup:
  fields:
    default: code, created_at
    list: code, source, created_at, url
    form: code, source
    options:
      selectors: source
  order_by: -created_at
  application: Misc, 2

Notification:
  fields:
    default: subject, comment, typus_user, created_at, sent_status
    list: subject, order, comment, typus_user, created_at, sent_status
    form: order, attach_pnr, subject, comment, format, status
    show: order, typus_user, created_at, format, destination, attach_pnr, subject, comment, sent_status
    options:
      read_only: order
      selectors: status, format
      date_formats:
        created_at: long
        updated_at: long
        sent_at: long
      booleans:
        attach_pnr: ["yes", "no"]
  options:
    action_after_save: show
    default_action_on_item: show
  order_by: -created_at
  search: ^order_id, pnr_number, comment
  filters: created_at, status
  relationships: order, typus_user
  application: Misc, 2

