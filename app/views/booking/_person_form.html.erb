
<% if person_form_counter > 0 %>
    <h2><%= @numbers[person_form_counter]%> пассажир</h2>
<% end  %>
<% fields_for "data[person_attributes][]", person_form do |person| %>
<dd class="booking-persons state-validating">
    <table>
        <tr>
            <td>
                <%= person.text_field :first_name, :id =>"booking-person-#{person_form_counter+1}-fname", :class => "text g-xl", :onclick => "return {defaultValue: 'Имя'}"%>
            <td>
                <%= person.text_field :last_name, :id =>"booking-person-#{person_form_counter+1}-lname", :class => "text g-xl", :onclick => "return {defaultValue: 'Фамилия'}"%>
            <td>
                <ul class="radio g-xxs">
                    <li>
                      <%= person.radio_button :sex, 'm', :id =>  "booking-person-#{person_form_counter+1}-sex-m"%><label for="booking-person-<%=person_form_counter+1%>-sex-m" value='m'>мужской</label>
                    </li>
                    <li><%= person.radio_button :sex, 'm', :id =>  "booking-person-#{person_form_counter+1}-sex-f"%><label for="booking-person-<%=person_form_counter+1%>-sex-f" value='f'>женский</label>
                </ul>

        <tr>
            <td colspan="3">
                <label for="booking-person-<%=person_form_counter+1%>-fname" class="g-xxs sub">латинскими буквами, как в загранпаспорте или банковской карточке&nbsp;<u class="b-expand" title="Как написать имя&hellip;"></u><u class="g-none">&hellip;</u></label>

        <tr>
            <td>
                <label 
                 for="booking-person-<%=person_form_counter+1%>-nationality"
                 class="bold g-s"
                 title="Гражданство пассажира"
                >Гражданство</label>

            <td>
                <label
                 for="booking-person-<%=person_form_counter+1%>-birth-d"
                 class="bold g-s"
                 title="Дата рождения пассажира в формате дд/мм/гггг"
                >Дата рождения</label>
            <td>

        <tr>
            <td>
                <%= person.select :nationality,
                grouped_options_for_select(Country.options_for_nationality_select), {},
                :id =>  "booking-person-#{person_form_counter+1}-nationality", :class => "text text-noempty g-xl" %>
            <td>
                <input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-birth-d"
                 name="data[person_attributes][][birthday(3i)]"
                 class="text text-dd g-xl"
                 value=<%= (person_form.birthday &&  person_form.birthday.day) ||"день"%>
                 maxlength="2"
                 onclick="return {defaultValue: 'день'}"
                ><input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-birth-m"
                 name="data[person_attributes][][birthday(2i)]"
                 class="text text-mm g-xl"
                 value=<%= (person_form.birthday &&  person_form.birthday.month) ||"месяц"%>
                 maxlength="10"
                 onclick="return {defaultValue: 'месяц'}"
                ><input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-birth-y"
                 name="data[person_attributes][][birthday(1i)]"
                 class="text text-yyyy g-xl"
                 value=<%= (person_form.birthday &&  person_form.birthday.year) ||"год"%>
                 maxlength="4"
                 onclick="return {defaultValue: 'год'}"
                >

            <td>

        <tr>
            <td>
            <td>
                <label
                 for="booking-person-<%=person_form_counter+1%>-expires-d"
                 class="bold g-s"
                 title="Срок действия документа, который будет предъявлен при посадке. Если у документа срока действия нет, то поставьте отметку справа от поля."
                >Срок действия документа</label>
            <td>

        <tr>
            <td>
                <%= person.text_field :passport, :id => "booking-person-#{person_form_counter+1}-passport", :class => "text g-xl", :maxlength => '20', :onclick => "return {defaultValue: 'Номер документа'}" %>
            <td>
                <input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-expires-d"
                 name="data[person_attributes][][document_expiretion_date(3i)]"
                 class="text text-dd g-xl"
                 value=<%= (person_form.document_expiretion_date &&  person_form.document_expiretion_date.day) ||"день"%>
                 maxlength="2"
                 onclick="return {defaultValue: 'день'}"
                ><input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-expires-m"
                 name="data[person_attributes][][document_expiretion_date(2i)]"
                 class="text text-mm g-xl"
                 value=<%= (person_form.document_expiretion_date &&  person_form.document_expiretion_date.month) ||"месяц"%>
                 maxlength="10"
                 onclick="return {defaultValue: 'месяц'}"
                ><input type="text" 
                 id="booking-person-<%=person_form_counter+1%>-expires-y"
                 name="data[person_attributes][][document_expiretion_date(1i)]"
                 class="text text-yyyy g-xl"
                 value=<%= (person_form.document_expiretion_date &&  person_form.document_expiretion_date.year) ||"год"%>
                 maxlength="4"
                 onclick="return {defaultValue: 'год'}"
                >
            <td class="noexp">
                <%= person.check_box :document_noexpiration, {:id => "booking-person-#{person_form_counter+1}-noexpiration", :class => "g-middle"} %>
                <label 
                 for="booking-person-<%=person_form_counter+1%>-noexpiration"
                 class="g-xxs"
                 title="Срока действия нет, например, у российского гражданского паспорта и свидетельства о рождении. Однако, у загранпаспорта срок действия есть, и его надо указать."
                 >у&nbsp;этого документа нет срока действия</label>


        <tr>
            <td colspan="2">
                <label for="booking-person-<%=person_form_counter+1%>-passport" class="sub g-xxs">например, загранпаспорта&nbsp;<u class="b-expand" title="Подробнее о документах&hellip;"></u><u class="g-none">&hellip;</u></label>
            <td>
        <tr>
            <td>
                <%= person.check_box :bonus_present, {:id => "booking-person-#{person_form_counter+1}-bonus",
                :class => 'g-middle'} %>
                <label 
                 for="booking-person-<%=person_form_counter+1%>-bonus"
                 class="g-xxs"
                 title="Карта участника программы премирования пассажиров (мильной программы или программы для&nbsp;часто летающих пассажиров, англ. frequent flyer program)"
                 >у&nbsp;пассажира есть бонусная карта</label>

                 <!-- http://ru.wikipedia.org/wiki/Бонусные_программы_авиакомпаний -->

            <td>
                <%= person.select :bonuscard_type, ['Аэрофлот Бонус', 'Бонусявый Бонус', 'Бонюсючий Бонус'],
                {}, :id => "booking-person-#{person_form_counter+1}-bonuscard", :class => 'text text-noempty g-xl g-hidden'  %>
            <td>
                <%=person.text_field :bonuscard_number, :class => 'text text-bonus g-xl g-hidden', :id => "booking-person-#{person_form_counter+1}-bonuscardnumber", :maxlength => '20', :onclick => "return {defaultValue: 'Номер карты'}" %>
    </table>
</dd>
<% end  %>