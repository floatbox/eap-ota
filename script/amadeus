#!/usr/bin/env ruby
require_relative '../config/environment'

require 'readline'
prompt = ''

office = ( ARGV.shift || Amadeus::Session::BOOKING ).dup
office.upcase!
prompt = "#{Conf.amadeus.env} #{office} > "

Amadeus.session(office) do |amadeus|
  while command_line = Readline.readline(prompt, true)
    command_line.chomp!
    break if command_line == 'q'
    next if command_line == ''
    command_line.split(';').each do |cmd|
      puts amadeus.cmd(cmd)
    end
  end
end
